{% extends 'index.html.twig' %}

{% block main %}
    <div class="adminalignment">
        <h1>My account</h1>
        <table class="table blueTable">
            <tr>
                <th>Id</th>
                <th>Firstname</th>
                <th>Prefix</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Current employer</th>
                <th>Username</th>
                <th>Role</th>
                <th>Action</th>
            </tr>
            <tr>
                <form name="user" action="">
                    <td><input name="id" value="{{ user.id }}" readonly></td>
                    <td><input name="firstname" value="{{ user.firstname }}"></td>
                    <td><input name="prefix" value="{{ user.prefix }}"></td>
                    <td><input name="lastname" value="{{ user.lastname }}"></td>
                    <td><input name="email" value="{{ user.email }}" readonly></td>
                    <td><input name="currentemployer" value="{{ user.currentemployer }}"></td>
                    <td><input name="username" value="{{ user.username }}" readonly></td>
                            <td><p>User</p></td>
                    <td>
                        <input class="updatebtn" type="button" value="update user" onClick="updateUser();">
                    </td>
                </form>
            </tr>
        </table>
    </div>
    <div id="succes"></div>
{% endblock%}

{% block text %}
<h1>See my visitors</h1>
{% endblock %}

{% block promotion %}
    <div class="tablealignment">
        <table class="table blueTable" id="visitors" name="visitors">
            <tr>
                <th>Password</th>
                <th>Firstname</th>
                <th>Prefix</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Expire date</th>
                <th>Action</th>
            </tr>
        {% for visitor in visitors %}
            <tr>
                <form name="test">
                    <td>{{ visitor.password }}</td>
                    <td>{{ visitor.firstname }}</td>
                    <td>{{ visitor.prefix }}</td>
                    <td>{{ visitor.lastname }}</td>
                    <td>{{ visitor.email }}</td>
                    <td>{{ visitor.expiredate|date('d-m-Y') }}</td>
                    <td>
                        <input class="deletebtn remove" type="button" name="deletevisitor" value="delete" onClick="deleteVisit({{ visitor.id}});">
                    </td>
                </form>
            </tr>
                {% endfor %}
        </table>
    </div>
    <div id="succes">
    </div>
    <div class="addvisitoralignment">
        <h3>Add a visitor</h3>
        <table class="table blueTable">
            <tr>
                <th>Firstname</th>
                <th>Prefix</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Action</th>
            </tr>
            <tr>
                <form name="updatevisitor" action="">
                    <td><input name="firstname" class="inputfield" value=""></td>
                    <td><input name="prefix" class="inputfield" value=""></td>
                    <td><input name="lastname" class="inputfield" value=""></td>
                    <td><input name="email" id="email" class="inputfield" value="" type="email" required></td>
                    <td>
                        <input class="registerbtn" type="button" name="addVisitor" value="Add visitor" onClick="addVis({{ user.id }});">
                    </td>
                </form>
            </tr>
        </table>
    <h4>Get new password</h4>
    <table class="table blueTable">
        <tr>
            <th>Old password</th>
            <th>New password</th>
            <th>Confirm new password</th>
            <th>Confirm</th>
        </tr>
        <tr>
            <form method="post" action="">
                <input name ="userid" value="fix this userid" hidden><!-- here comes currentUser.id for password verification  so currentUser.id will do-->
                <td><input type="password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" name="oldpw" value="" required></td>
                <td><input type="password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" name="newpw" value="" required></td>
                <td><input type="password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" name="confirmnewpw" value="" required></td>
                <td>
                    <button class="updatebtn" type="submit" name="updateuserpassword" value="">Update</button>
                </td>
            </form>
        </tr>
    </table>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="panel.js"></script>

{% endblock %}

